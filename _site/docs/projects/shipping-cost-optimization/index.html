<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"><link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"><style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(5) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; }</style><script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>Shipping cost optimization with dangerous goods penalty | auerbenji</title><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Shipping cost optimization with dangerous goods penalty" /><meta property="og:locale" content="en_US" /><meta name="description" content="A personal blog where I share what is on my mind." /><meta property="og:description" content="A personal blog where I share what is on my mind." /><link rel="canonical" href="http://localhost:4000/docs/projects/shipping-cost-optimization/" /><meta property="og:url" content="http://localhost:4000/docs/projects/shipping-cost-optimization/" /><meta property="og:site_name" content="auerbenji" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Shipping cost optimization with dangerous goods penalty" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A personal blog where I share what is on my mind.","headline":"Shipping cost optimization with dangerous goods penalty","url":"http://localhost:4000/docs/projects/shipping-cost-optimization/"}</script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> auerbenji </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="/docs/about/" class="nav-list-link">About me</a><li class="nav-list-item"><a href="/docs/configuration/" class="nav-list-link">Configuration</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in UI Components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ui-components/" class="nav-list-link">UI Components</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ui-components/typography/" class="nav-list-link">Typography</a><li class="nav-list-item"><a href="/docs/ui-components/buttons/" class="nav-list-link">Buttons</a><li class="nav-list-item"><a href="/docs/ui-components/labels/" class="nav-list-link">Labels</a><li class="nav-list-item"><a href="/docs/ui-components/tables/" class="nav-list-link">Tables</a><li class="nav-list-item"><a href="/docs/ui-components/lists/" class="nav-list-link">Lists</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Code category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ui-components/code/" class="nav-list-link">Code</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ui-components/code/line-numbers/" class="nav-list-link">Line Numbers</a></ul><li class="nav-list-item"><a href="/docs/ui-components/callouts/" class="nav-list-link">Callouts</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Projects category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/projects/" class="nav-list-link">Projects</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/projects/shipping-cost-optimization/" class="nav-list-link">Shipping cost optimization with dangerous goods penalty</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Publications category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/publications/" class="nav-list-link">Publications</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/publications/algorithmic-advances-in-flexibility-analysis/" class="nav-list-link">Algorithmic advances in flexibility analysis for large-scale location allocation problems</a><li class="nav-list-item"><a href="/docs/publications/co-optimization-spark-ignition/" class="nav-list-link">Computational co-optimization of fuel and spark-ignition engines</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Blog category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/blog/" class="nav-list-link">Blog</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/blog/the-oater-is-patented/" class="nav-list-link">The Oater is patented</a><li class="nav-list-item"><a href="/docs/blog/recipe-cinnamon-swirl/" class="nav-list-link">Recipe cinnamon swirl</a><li class="nav-list-item"><a href="/docs/blog/recipe-overnight-baguette/" class="nav-list-link">Recipe overnight baguette</a><li class="nav-list-item"><a href="/docs/blog/recipe-overnight-foccacia/" class="nav-list-link">Recipe overnight foccacia</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Utilities category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/utilities/" class="nav-list-link">Utilities</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/utilities/color/" class="nav-list-link">Color</a><li class="nav-list-item"><a href="/docs/utilities/layout/" class="nav-list-link">Layout</a><li class="nav-list-item"><a href="/docs/utilities/responsive-modifiers/" class="nav-list-link">Responsive Modifiers</a><li class="nav-list-item"><a href="/docs/utilities/typography/" class="nav-list-link">Typography</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Layout category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/layout/layout/" class="nav-list-link">Layout</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in A minimal layout page category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/layout/minimal/minimal/" class="nav-list-link">A minimal layout page</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/layout/minimal/default-child/" class="nav-list-link">Default layout child page</a><li class="nav-list-item"><a href="/docs/layout/minimal/minimal-child/" class="nav-list-link">Minimal layout child page</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Navigation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/" class="nav-list-link">Navigation</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Main Navigation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/main/" class="nav-list-link">Main Navigation</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/navigation/main/order/" class="nav-list-link">Ordering Pages</a><li class="nav-list-item"><a href="/docs/navigation/main/exclude/" class="nav-list-link">Excluding Pages</a><li class="nav-list-item"><a href="/docs/navigation/main/levels/" class="nav-list-link">Page Levels</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Ancestry category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/main/ancestry/" class="nav-list-link">Ancestry</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in X category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/main/x/" class="nav-list-link">X</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in S category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/main/xs/" class="nav-list-link">S</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in T category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/main/xt/" class="nav-list-link">T</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/navigation/main/xu/" class="nav-list-link">U</a></ul></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Y category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/main/y/" class="nav-list-link">Y</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in S category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/main/ys/" class="nav-list-link">S</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in T category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/navigation/main/yt/" class="nav-list-link">T</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/navigation/main/yu/" class="nav-list-link">U</a></ul></ul></ul></ul><li class="nav-list-item"><a href="/docs/navigation/main/collections/" class="nav-list-link">Collections</a><li class="nav-list-item"><a href="/docs/navigation/main/external/" class="nav-list-link">External Links</a></ul><li class="nav-list-item"><a href="/docs/navigation/auxiliary/" class="nav-list-link">Auxiliary Links</a><li class="nav-list-item"><a href="/docs/navigation/parents/" class="nav-list-link">Breadcrumbs</a><li class="nav-list-item"><a href="/docs/navigation/children/" class="nav-list-link">Child Pages</a><li class="nav-list-item"><a href="/docs/navigation/in-page/" class="nav-list-link">In-Page Navigation</a></ul><li class="nav-list-item"><a href="/docs/customization/" class="nav-list-link">Customization</a><li class="nav-list-item"><a href="/docs/search/" class="nav-list-link">Search</a><li class="nav-list-item"><a href="/docs/index-test/" class="nav-list-link">Markdown kitchen sink</a><li class="nav-list-item"><a href="/docs/imprint/" class="nav-list-link">Imprint</a><li class="nav-list-item"><a href="/CHANGELOG/" class="nav-list-link">CHANGELOG</a><li class="nav-list-item"><a href="/MIGRATION/" class="nav-list-link">Migration and Upgrading</a></ul><ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/auerbenji/" class="nav-list-link external" > Benjamin on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a></ul></nav><footer class="site-footer"> This site uses <a href="https://just-the-docs.com/">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search auerbenji" aria-label="Search auerbenji" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://www.linkedin.com/in/auerbenjamin/" class="site-button" > Add me on LinkedIn </a></ul></nav></div><div class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/projects/">Projects</a><li class="breadcrumb-nav-list-item"><span>Shipping cost optimization with dangerous goods penalty</span></ol></nav><div id="main-content" class="main-content"><main><h1 class="no_toc d-inline-block" id="appetizer"> <a href="#appetizer" class="anchor-heading" aria-labelledby="appetizer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Appetizer</h1><p class="label label-green">08-30-2025</p><p class="fs-6 fw-300">Did you ever wonder how to optimally pack parcels, serving customers with various subscription sizes while avoiding a dangerous goods shipping penalty fee? No? Well, me neihter. Let’s investigate how its done anyways! Stay with me, its worth it: we will reduce shipping cost by 55% just by intelligently exploiting the degressive cost-per-weight structure in today’s CEP sector and show why shopping-cart bundling is worth it! We will then end on a generalizing note, rediscovering the knapsack problem along the way.</p><hr /><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#introduction" id="markdown-toc-introduction">Introduction</a><ol><li><a href="#cep-sector---weight-and-girth-length-matter" id="markdown-toc-cep-sector---weight-and-girth-length-matter">CEP sector - weight and girth length matter</a><li><a href="#warehouse---every-pick-matters" id="markdown-toc-warehouse---every-pick-matters">Warehouse - every pick matters</a></ol><li><a href="#case-study-minimizing-the-oaters-cost-to-serve" id="markdown-toc-case-study-minimizing-the-oaters-cost-to-serve">Case study: minimizing The Oater’s cost to serve</a><ol><li><a href="#the-oater-product-portfolio" id="markdown-toc-the-oater-product-portfolio">The Oater product portfolio</a></ol><li><a href="#methodology" id="markdown-toc-methodology">Methodology</a><ol><li><a href="#cost-of-goods" id="markdown-toc-cost-of-goods">Cost of goods</a><li><a href="#carrier-cost" id="markdown-toc-carrier-cost">Carrier cost</a><ol><li><a href="#shipping-cost-vector" id="markdown-toc-shipping-cost-vector">Shipping cost vector</a><li><a href="#parcel-content-and-weight" id="markdown-toc-parcel-content-and-weight">Parcel content and weight</a></ol><li><a href="#warehouse-cost" id="markdown-toc-warehouse-cost">Warehouse cost</a><li><a href="#cost-function" id="markdown-toc-cost-function">Cost function</a><li><a href="#shipping-cost-problem" id="markdown-toc-shipping-cost-problem">Shipping cost problem</a><ol><li><a href="#solution-strategy" id="markdown-toc-solution-strategy">Solution strategy</a></ol></ol><li><a href="#results-and-discussion" id="markdown-toc-results-and-discussion">Results and discussion</a><li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a><li><a href="#code" id="markdown-toc-code">Code</a></ol><hr /><h1 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction</h1><p>The German logistics market had a total volume of €327 billion in 2023. This makes logistics the third largest economic sector in Germany after the automotive industry and trade. Approximately half of the total volume originates from internal company’s logistics. The other half is generated by dedicated package delivery, courier and transportation companies. Logistic services are divided into general cargo (traditional pallets, special transports) and the more standardized CEP sector (<a href="https://www.dslv.org/de/die-branche/logistikmarkt">DSLV</a>). The transportation companies’ CEP sector was reported to make up around 16% of the total revenue and thus generates a turnover of 27 billion euros, which is comparable to the German consumer electronics market (<a href="https://www.dslv.org/de/die-branche/logistikmarkt">CEP</a>). In 2023, the CEP sector delivered around 4.51 billion parcels in Germany. Approximately 50% of this in terms of revenue and number of shipments were delivered by Deutsche Post DHL Group, the world’s second-largest logistics company after FedEx (<a href="https://www.ingenieur.de/technik/fachbereiche/logistik/das-sind-die-groessten-logistikunternehmen-der-welt/">Transportation companies by size</a>).</p><blockquote class="note-title"><p>CEP</p><p>The term CEP is the abbreviation for “Courier, Express and Parcel Services”. It refers to postal and logistics companies that primarily transport consignments with comparatively low weight and volume - such as letters, small packages, documents or small items. These restrictions on dimensions and weight allow a high degree of standardisation in processing. As a result, the handling and sorting of the objects to be transported can be easily (partially) automated. In this way, consignments can be transported in a short time and with high efficiency. (<a href="https://dhl-freight-connections.com/en/logistics-dictionary/cep/">DHL Dictionary</a>)</p></blockquote><p>The CEP sector is highly automated, which makes it cost-efficient. Consumers benefit significantly from low costs, as CEP enables access to a wide range of products offered on B2B and B2C marketplaces. However, since differentiation among CEP providers is limited, carriers create artificial service tiers to enforce differentiation and capture better prices. For example, logistics providers offer up to seven distinct classes within the \(0–31.5 \text{kg}\) range, with cost per weight decreasing as total weight increases. This results in a discrete buy-in to a given weight class, with any additional weight up to the class limit being effectively free, until the next buy-in at the following weight class becomes necessary. Other differenciation features might be present such as dangerous goods shipping fee, girth limits and more. This work exploits these discrete and predefined class features to allocate goods in an optimal way minimizing the cost to serve.</p><p>Comparing a standardized shopping cart with an allocation-optimized shopping cart we reduce the carrier cost by up to 55%. To understand the degrees of freedom that are available for optimization we will briefly introduce the CEP and warehousing sector as well as The Oater’s product portfolio and delivery frequencies.</p><h2 id="cep-sector---weight-and-girth-length-matter"> <a href="#cep-sector---weight-and-girth-length-matter" class="anchor-heading" aria-labelledby="cep-sector---weight-and-girth-length-matter"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CEP sector - weight and girth length matter</h2><p>In order for the CEP sector to operate in a particularly cost-efficient manner and offer low prices to consumers, it is highly standardized with parcels meeting strict criteria in order to be processed as CEP. Three criterias are always applicable:</p><ul><li>weight with most transportation companies delivering parcels up to 31.5kg (70lbs)<li>girth with most transportation companies limiting girth + length between 3000 and 4000 mm<li>dangerous goods are generally excluded from CEP transportation unless they are transported in limited quantity, smallest quantities or products that are individually exempt from the dangerous goods transportatin prohibition according to ADR 3.3, 3.4, 3.5 (see (<a href="https://unece.org/protocol-amending-title-european-agreement-30-september-1957-concerning-international-carriage">ADR</a>)</ul><blockquote class="note-title"><p>Girth / Girth + length</p><p>The girth is the maximum permitted parcel size. It is calculated as: girth = 2 x (height + width). Most companies use girth + length = 2 x (height + width) + length to determine the maximum parcel size (<a href="https://dhl-freight-connections.com/en/logistics-dictionary/girth-measurement/">DHL Dictionary</a>, <a href="https://www.dpd.com/de/en/faq/was-beutet-gurtmas/">DPD FAQ</a>).</p></blockquote><p>To ensure that the delivery can be carried out particularly quickly (especially without material handling equipment such as forklifts), packages must not exceed a maximum permissible weight. This varies from provider to provider, but is centered around around 31.5 kg. <em>Girth + length</em> ensures that apart from weight a certain “density” maintained. Space is expensive and <em>girth + length</em> ensures a lower bar on what might be a cheap parcel in terms of wight but taking up overproportionally large space in the transportation vehicles. The product portfolio that is subject to optimization is dense enough such that we omit the <em>girth + length</em> constraint. Dangerous goods are less an economic category than a legal one, defined by the agreement of September 30, 1957 concerning the <em>International Carriage of Dangerous Goods by Road</em> (ADR) from 1957 ensuring safe transportation. This agreement categorizes goods for road transport, defines warning and safety instructions and lists exceptions. Exceptions include:</p><ul><li>simplified transport of certain dangerous goods when carried in small quantities as part of a company’s ancillary activities (e.g., maintenance, repair, construction) according to Special Provision SV1 (ADR 3.3)<li>limited quantities (LQ) allows exemptions from most ADR provisions when dangerous goods are packaged in very small quantities per inner and outer packaging (ADR 3.2)<li>Lithium-ion batteries in different sizes according to total capacity, cell size with respect to packaging, and prior certification<li>blood and tissue samples when transported in specific packaging and quantity The cleaning detergent in The Oater’s product portfolio is subject to the LQ-regulation and may thus be shipped in one liter units when a fee is paid to the carrier insuring the carrier against leakage that might cause loss and damage to other goods in the cargo haul.</ul><h2 id="warehouse---every-pick-matters"> <a href="#warehouse---every-pick-matters" class="anchor-heading" aria-labelledby="warehouse---every-pick-matters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Warehouse - every pick matters</h2><p>While a carrier only provides transportation services and thus assumes that the company itself is in physical possession of the outbound goods, this is not always the case. Most retailers and manufacturers rely on yet another third party that provides storage space. Typically this party is referred to as warehouse provider. Optionally, the warehouse provider also provides order administration and packaging. In case the whole value chain is fullfilled via a third party, one refers to this as third-party-logistics (3PL), adressing carrier, warehouse and packaging</p><p>Warehouses hold space for incoming goods, storage, a dedicated picking system, a packing area and a freight forwarding area where parcels are handed over to the carrier. Consequently service providers typically attribute cost for the administration and processing of incoming goods (usually on paletts), the administration of orders, the pick from a palett, the packing into carton and the placing into cargo space. A pick is associated with one product category, regardless of the quantity of the product. The occupied warehouse space is charged on a daily rate.</p><p>It makes sense to bundle consecutive orders per customer in order to save on additional picking costs (picking two pieces of the same type at the same time is cheaper than picking the same piece at two times). Apart from that, the strict billing system, in which every single step is charged individually, leaves little room for cost optimization shifting focus from warehouse back to CEP provider. The largest savings are generated by levelizing the administration fee over more liters in the monthly subscription.</p><blockquote class="note-title"><p>3PL</p><p>Third-Party Logistics (3PL) refers to a business model in which a company outsources its logistics processes to an external service provider, a “third party”, regardless of the part of the logistics provided. Typically logistic processes are divided into warehousing/storage, usually including the control of incoming and outgoing goods (administration, picking, packing, truck loading) while another party takes care of transportation. While some companies offer a full-service other companies only provide one or some of the mentioned services. (<a href="https://redstagfulfillment.com/3pl-definition-process-resources/">Red Stag Fulfillment</a>)</p></blockquote><h1 id="case-study-minimizing-the-oaters-cost-to-serve"> <a href="#case-study-minimizing-the-oaters-cost-to-serve" class="anchor-heading" aria-labelledby="case-study-minimizing-the-oaters-cost-to-serve"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Case study: minimizing The Oater’s cost to serve</h1><h2 id="the-oater-product-portfolio"> <a href="#the-oater-product-portfolio" class="anchor-heading" aria-labelledby="the-oater-product-portfolio"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The Oater product portfolio</h2><p>The Oater produces The Oater Barista, an automated oat drink production machine. The machine mixes water, an oat-based dry mix, as well as canola oil yielding oat drink through fermentation. After production, The Oater Barista doses a cleaning detergent into the reactor. The Oater Barista’s batch production is patented. Interested? <a href="https://auerbenji.github.io/docs/blog/the-oater-is-patented/">Read on here</a>.</p><p>Dry mix, oil and cleaning detergent are sent to the customer on a monthly basis. The quantities depend on the subscription volume (\(a\)) chosen by the customer. Dry mix, oil, and cleaning detergent are only available in a single container size. The cleaning detergent’s container size is limited by ADR section 3.2.</p><p>The The Oater Barista machine uses exactly one dry mix pouch, \(\frac{1}{5}\) of an oil bottle and \(\frac{1}{9}\) of a cleaning detergent bottle to produce 4.5 liters of oat drink in a single production cycle. Consequently</p><ul><li>one pouch of dry mix is sufficient to produce 4.5 liters of oat drink<li>one bottle of oil is sufficient to produce 22.5 liters of oat drink<li>one bottle of cleaning detergent is sufficient to produce 40.5 liters of oat drink.</ul><p>Note that not only the net weight of the consumable goods must be considered, but also the gross weight, which includes the paper pouch and (glass/plastic) bottle. In addition, shipments can only be made in complete quantities.</p><h1 id="methodology"> <a href="#methodology" class="anchor-heading" aria-labelledby="methodology"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Methodology</h1><p>Given a known customer’s subscription size (\(a\)) and a known shipping-cost-to-weight vector (\(V\)) and known dangerous goods penalty (\(\Phi\)), as well known costs for warehousing and carrier we want to find the packing rule that yields minimal cost to serve the customer. We assume that girth size is never a limiting factor due to the high density of the individual products. Instead of minimizing only transportation cost we will look at the cost to serve. We will refer to this as the <em>shipping-cost-problem</em>.</p><p>As a heuristic we place all bottles of cleaning detergent in a single parcel so that the penalty is only paid once. However, the different weight categories of dry mix, oil and cleaning detergent indicate that it may no longer be possible to make optimal use of the shipping weight, as the weight class of the cleaning detergent is no longer available or other parcels. Furthermore, the degressive cost structure of shipping costs might make it more attractive to pack two medium-weight packages than one very heavy and one light package. It renders obvious that there is no simple instruction that guarantees minimal cost. We will therefore proceed to <em>mathematical optimization</em>.</p><blockquote class="note-title"><p>Mathematical optimization</p><p>Mathematical optimization, also known as mathematical programming is the art of selecting of the best solution, given a set of conditions that have to be fullfilled exactely (equality constraints) as well as a set of conditions that have to be fullfilled but may vary in a given range (inequality constraints). The equation that defines how a good solution is measured is called <em>cost function</em>. The nature of the variables involved in the cost function and in the constraints then define the problem category and thus lastly solution approach. Mathematical programming is used everywhere, from routing problems, AI training to advanced process control and has equal origins in the chemical engineering community as well as in operations research. The interested reader is directed to my former Professor Stratos Pistikopoulos who taught me optimization (see <a href="https://parametric.tamu.edu/">Parametric</a>) as well as his dear collegues in the field such as Professor Alexander Mitsos (see <a href="https://www.avt.rwth-aachen.de/cms/AVT/Forschung/Systemverfahrenstechnik/~ipqz/Prozessregelung/lidx/1/">SVT</a>). Furthermore I suggest reading articles in <a href="https://www.sciencedirect.com/journal/computers-and-chemical-engineering">CACE</a>, and <a href="https://www.sciencedirect.com/journal/european-journal-of-operational-research">EJOR</a>, both great journals to follow and inspire how today’s engineering problems are solved via optimization.</p></blockquote><h2 id="cost-of-goods"> <a href="#cost-of-goods" class="anchor-heading" aria-labelledby="cost-of-goods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cost of goods</h2><p>We base the solution algorithm on the price per liter of produced oat drink and define a known monthly subscription model size \(a\). The known number of oat packs \(N_T\), oil bottles \(N_O\) and cleaning agent bottles \(N_R\) are consequently given by ceiling to the largest natural number that statisfies \(a\) and are stored in \(N\):</p><ul><li> \[N_T = \left\lceil a/4.5 \right\rceil\]<li> \[N_O = \left\lceil a/22.5 \right\rceil\]<li> \[N_R = \left\lceil a/40.5 \right\rceil\]</ul><p>where \(N = [N_T \quad N_O \quad N_R] \in \mathbb{N^3}\). Consequently the number of species subject to optimization is \(N_S=3\). Each item has a known weight \(w = [w_T, w_O, w_R]^\top\) in kilo gram, and a known cost-per-piece \(c = [c_T, c_O, c_R]^\top\) in Euro.</p><h2 id="carrier-cost"> <a href="#carrier-cost" class="anchor-heading" aria-labelledby="carrier-cost"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Carrier cost</h2><p>Carrier cost can be obtained by the multiplication of a cost-per-weight vector with a distribution matrix holding the content of each parcel.</p><h3 id="shipping-cost-vector"> <a href="#shipping-cost-vector" class="anchor-heading" aria-labelledby="shipping-cost-vector"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Shipping cost vector</h3><p>The shipping cost vector \(V\) holds the price-per-parcel (\(SC\)) within the associated shipping weight class (\(SW\)). We remove 1.5 kg from each parcel to account for carton and filling weight.</p>\[V = \begin{bmatrix} SC &amp; SW \\ \end{bmatrix}^\top = \begin{bmatrix} 0 &amp; 0 \\ 3.62 &amp; 1.5 \\ 4.17 &amp; 3.5 \\ 4.83 &amp; 8.5 \\ 6.30 &amp; 13.5 \\ 6.85 &amp; 18.5 \\ 7.02 &amp; 23.5 \\ 7.29 &amp; 30 \end{bmatrix}^\top\]<p>For better understanding <a href="#fig-cost-by-cat">figure 1</a> visualizes the piecewise linear nature of \(V\), mapping parcel cost to weight. The blue curve plots the parcel cost over the admissable parcel weight. Notice that a flat slope indicates a good weight to cost ratio. The cost per weight are steadily decreasing, making heavy parcels most efficient.</p><figure id="fig-cost-by-cat"> <img src="/assets/images/V-vector.svg" alt="Shipping cost vector" /><figcaption><strong>Figure 1:</strong> Shipping cost vector: parcel and per weight cost.</figcaption></figure><p>The length of \(V\) is the number of different weight/cost categories provided by the CEP, here \(N_V= 8\), as we include the null-weight/cost as a convenient way to attribute zero cost associated with an empty, never packed parcel. Last we define the dangerous goods shipping cost penalty as \(\phi=3.5\) as a one-time fee added to each parcel that contains \(\geq1\) cleaning detergent bottles.</p><h3 id="parcel-content-and-weight"> <a href="#parcel-content-and-weight" class="anchor-heading" aria-labelledby="parcel-content-and-weight"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parcel content and weight</h3><p>In oder to calculate the weight efficiently we introduce the distribution matrix \(D \in [N_S, N_T+N_O+N_R=N_L]\) holding the number of items per species per parcel. As an upper bound for the number of parcels necessary to ship all items we conveniently use the sum of all individual items. Additionally, we introduce the cost category matrix \(C \in [N_V, N_L]\) a zero-matrix consisting of zeros exept for the respective cost category of each parcel denoted with a \(1\). We lastly define a penalty vector \(\Phi \in [N_L]\) holding zeros for each parcel except for ones for the parcel that hold \(\geq1\) cleaning detergent bottles. Consequently \(\Phi\) is a binary optimization variable.</p><h2 id="warehouse-cost"> <a href="#warehouse-cost" class="anchor-heading" aria-labelledby="warehouse-cost"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Warehouse cost</h2><p>Warehouse cost assume that each subscription triggers only one monthly “warehouse run”, even if the total shopping cart is then packed in more than one parcel. For ease of understanding we separate the warehouse cost \(c_{\text{warehouse}}\):</p>\[\begin{align} c_{\text{warehouse}} &amp;= c_{\text{pick}}+c_{\text{parcel}} \\ c_{\text{pick}} &amp;= c_A + c_P \cdot N_S \\ c_{\text{parcel}} &amp;= c_p \cdot \sum^P \sum^C C_{c,p} \end{align}\]<p>where \(c_A\) is the per-subscription order administration fee and \(c_P\) is the per-pick fee. Both fees are known and warehouse provider dependent. \(c_{\text{parcel}}\) is a warehouse provider dependent cost associated with carton, filling and freight farwarding of each parcel and is thus multiplied with the number of parcels that servce the monthly subscription. To conveniently grasp the number of parcels we rely on \(C\).</p><h2 id="cost-function"> <a href="#cost-function" class="anchor-heading" aria-labelledby="cost-function"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cost function</h2><p>The cost to serve (\(CTS\)) of one liter of oat-drink is the sum of the cost of goods \(CG\), the carrier cost \(CC\) and the warehouse cost \(WC\):</p>\[CTS(V,\phi) = \min_{D,\Phi,C} \frac{1}{a} (CG + CC + WC)\]<p>and are a function of the shipping-cost vector and the penalty fee. We assume \(N\) not to be subject to optimization. Inserting the discrete terms for each associated cost the cost function becomes</p>\[CTS(V,\phi) = \min_{D,\Phi,C} \frac{1}{a} (N \cdot c + \sum^C\sum^P SC_c \cdot C_{c,p} + \sum^P \phi \cdot \Phi_p + c_A + c_P \cdot N_S + c_p \cdot \sum^C \sum^P C_{c,p})\]<p>We optimize for the lowest possible cost to serve and calculate the fractions of \(CG, CC, WC\) in post-processing.</p><h2 id="shipping-cost-problem"> <a href="#shipping-cost-problem" class="anchor-heading" aria-labelledby="shipping-cost-problem"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Shipping cost problem</h2><p>The shipping cost problem is given as</p>\[\begin{align} CTS(V,\phi) &amp;= \min_{D,\Phi,C} \frac{1}{a} (N \cdot c + \sum^C\sum^P SC_c \cdot C_{c,p} + \sum^P \phi \cdot \Phi_p + c_A + c_P \cdot N_S + c_p \cdot \sum^C \sum^P C_{c,p}) \tag{a}\\ \text{s. t.} \quad \sum^P D_{s,p} &amp;= N_s \quad \forall s \in S \tag{b}\\ \sum^C C_{c,p} &amp;= 1 \quad \forall p \in P \tag{c}\\ \sum^S D_{s,p} \cdot w_s &amp;\leq SW_1 \cdot C_{1,p} + SW_{N_V} \cdot (1 - C_{1,p}) \quad \forall p \in P \tag{d}\\ SW_{c-1} \cdot C_{c,p} &amp;\leq \sum^S D_{s,p} \cdot w_s \quad \forall p \in P, c \in C \setminus [1] \tag{e}\\ \sum^S D_{s,p} \cdot w_s &amp;\leq SW_c \cdot C_{c,p} + SW_{N_V} \cdot (1 - C_{c,p}) \quad \forall p \in P, c \in C \setminus [1] \tag{f}\\ D_{N_S,p} &amp;\leq N_R \cdot \Phi_p \quad \forall p \in P \tag{g} \end{align}\]<p>Equation (b) guarantees that all items are shipped to the customer and equation (c) ensures only one weight category may be selected. Equation (d) serves a double purpose: first it provides a null-cost category, representing an empty and thus unshipped parcel. Additionally, in case the parcel is not empty, the maximum admissible parcel weight is set as an upper bound. Equation (e,f) finally select the correct cost category. Notice that the RHS of equation (e) is the LHS of equation (f). What could be written as a single line in math notation has to be split apart first and then handed to the optimizer. Lastly equation (g) sets the penalty pin in case cleaning detergent is in the parcel. Notice that the cost function then conveniently sums over all elements in \(\Phi\).</p><h3 id="solution-strategy"> <a href="#solution-strategy" class="anchor-heading" aria-labelledby="solution-strategy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Solution strategy</h3><p>The shipping cost problem holds linear terms as well as integer decision variables only. While \(D\) holds an integer decision variables; \(C, \Phi\) hold binary decision variables. Thus, the shipping cost problem is an integer programming problem and can be solved with standard IP solvers. The problem was solved with Gurobi Optimizer version 10.0.3 on an Apple M3 Pro SoC running 12 threads with 18GB RAM in Visual Studio version 1.101.2. The model consists of 1140 integer decision variables of which 855 are binaries for a subscription size of 320 liters and solved to optimality in 0.04 seconds for generation and 0.17 seconds for optimization. Since \(SW \ll 1e+5\) in \(D \cdot w \leq SW \cdot C\) in equation (f), we omitted setting Gurobis’ <em>IntegralityFocus</em> parameter.</p><blockquote class="note-title"><p>Integrality focus</p><p>Since \(C\) is binary, Gurobi assumes values for binaries that are as large as \(10^{-5}\) as \(0\). In case \(SW \gg 10^5\), this would not effectively enforce the intended relationship that \(D\) must be zero if \(C\) is zero. To circumvent the effect known as <em>trickle flow</em> Gurobi has the option to set the <em>IntegralityFocus</em> parameter. This makes Gurobi work really hard to make sure zeros are actual zeros by assuming only variables as large as \(10^{-9}\) as \(0\) (see <a href="https://docs.gurobi.com/projects/optimizer/en/current/reference/parameters.html#parameterintegralityfocus">IntegralityFocus</a>).</p></blockquote><p>For \(a=1000\), the model was solved to optimality in 0.10 seconds for generation and 0.83 seconds for optimization. This is remarkably fast for a model holding \(|C| \approx 10^3\) binaries. Consequently we will not investigate runtime improvement through problem reformulation. Gurobi does an excellent job at presolving and facilitating the problem before optimization.</p><blockquote class="note-title"><p>More on runtime will come soon</p><p>I will add a follow-up investiagation on solver and modeling language specific runtime, solving the shipping cost problem in Julia using JuMP, ORTools’ CP-SAT and HiGHS. Come back later. Note that my publication on <a href="https://auerbenji.github.io/docs/publications/algorithmic-advances-in-flexibility-analysis/">flexibility</a> already investigated the effects of omitting big-M constraints using SOS1 constraints instead on model generation and model optimization time.</p></blockquote><p>Notice shipping cost optimization extends bin packing, itself an extension of the NP-hard knapsack problem. The classical knapsack problem (see <a href="https://doi.org/10.1112/plms/s1-28.1.486">Knapsack 1</a>, <a href="http://dx.doi.org/10.1007/978-3-540-24777-7">Knapsack 2</a>) asks how to select a subset of items, each with a value and a weight, such that the total weight does not exceed a given capacity while maximizing the total value. This problem is already NP-hard, as the feasible solution space grows combinatorially with the number of items. A natural extension is the bin packing problem (see <a href="https://en.wikipedia.org/wiki/Bin_packing_problem">Wikipedia</a>), which shifts the focus from maximizing value to minimizing the number of bins required to hold all items, given fixed bin capacities. Its defining feature is the binary big-M style decision whether an item is placed in a particular bin. The shipping cost problem follows the same logic (see shipping cost problem’s equations d, e, f). Like bin packing, it uses binary allocation constraints, but it extends the model by introducing discrete cost classes for bins. Instead of minimizing only the number of bins, the objective is to minimize cost to serve by choosing not just how many bins are used but also which type of bins are selected. Thus, while inheriting the NP-hard complexity of knapsack and bin packing, the added dimension of discrete bin costs renders my problem even more challenging.</p><h1 id="results-and-discussion"> <a href="#results-and-discussion" class="anchor-heading" aria-labelledby="results-and-discussion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Results and discussion</h1><p><a href="#fig-cost-by-cat">Figure 2</a> shows the cost by categoy and their share of the total cost to serve. The horizontal axis of the figure represents the monthly subscription size. The cost to serve \(CTS\), warehouse cost \(CW\) and carrier cost \(CC\) are represented by solid lines and represented on the left y-axis. The proportions of the cost of goods \(\frac{CG}{CTS}\), warehouse cost \(\frac{CW}{CTS}\) and carrier cost \(\frac{CC}{CTS}\) are represented by dashed lines and represented on the right y-axis.</p><figure id="fig-cost-by-cat"> <img src="/assets/images/cost-of-species.svg" alt="" /><figcaption><strong>Figure 2:</strong> Shipping cost optimization: cost by category</figcaption></figure><p>The cost to serve approach a steady state starting from monthly subscription sizes of around 500 liters and more. The per-liter cost of goods are almost invariant with only minor effects through ceiling. Thus when a steady-state \(CTS\) is reached, this can only be achieved through a steady state in warehouse and carrier costs. The overall \(CTS\) savings are \(18.3\%\) when comparing the most unfortunate subscription size of 100 liters per month with the best possible subsciption size of 920 liters per month.</p><p>To further investigate this issue <a href="#fig-cost-by-cat">figure 3</a> shows the relative savings for warehouse cost (\(\eta_W\)) and carrier cost (\(\eta_C\)) compared against the \(a=80\) base case as this reflects the smallest available subscription size at The Oater. The findings from <a href="#fig-cost-by-cat">figure 2</a> are verified. Also the relative savings both for warehouse and carrier cost approach a near steady-state/saturation effect starting from around 500 liters per month.</p><figure id="fig-relative-savings"> <img src="/assets/images/relative-savings.svg" alt="Relative warehouse and carrier savings" /><figcaption><strong>Figure 3:</strong> Shipping cost optimization: relative warehouse and carrier savings</figcaption></figure><p>Just by optimally bundeling goods we achieve carrier cost savings of 55.5%. We save even more on warehouse expenses with savings of up to 74.4%. However, since the carrier cost are higher in absolut terms, carrier savings are more valuable to minimize cost to serve.</p><p>Lastly, let’s investigate the effect of shipping cost optimization from a different angle. <a href="#fig-parcel-value">Figure 4</a> shows the levelized per-parcel value (\(LPV = \dfrac{CTS \cdot a}{|\text{parcels}|}\)). As parcels are filled, \(LPV\) increases in a predictable manner. Once an additional box must be introduced, \(LPV\) drops sharply, which in turn reduces the overall cost efficiency of the carrier. This apparent loss can be mitigated by reverting to a smaller parcel category, defined by lower weight and cost, which dampens the decline in savings. The observed reductions in \(LPV\) align precisely with corresponding declines in \(\eta_W\) and \(\eta_C\) (see <a href="#fig-cost-by-cat">figure 3</a>), although the latter effect is less pronounced.</p><figure id="fig-cost-by-cat"> <img src="/assets/images/parcel-value.svg" alt="Levelized parcel value" /><figcaption><strong>Figure 4:</strong> Shipping cost optimization: levelized parcel value.</figcaption></figure><h1 id="conclusion"> <a href="#conclusion" class="anchor-heading" aria-labelledby="conclusion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Conclusion</h1><p>A strongly negative effect of the dangerous goods surcharge is not apparent. Looking at \(\Phi\), we observe that dangerous goods are only divided into two packages for subscription sizes of 940 liters or more. This only happens because dangerous goods required to serve subscription sizes of 940 liters and more exceed the weight limit for a single parcel. Bundling all cleaning detergent bottles into a single parcel indicates that the weight of a cleaning detergent bottle does not offer sufficient flexibility to achieve savings per weight through the clever filling of a package, despite the dangerous goods surcharge. This may be due to the fact that a cleaning detergent bottle weighs about twice as much as dry mix, whose quantity surpasses the cleaning detergent’s quantity (\(N_T \approx 10 \cdot N_R\), \(w_T \approx 0.5 \cdot w_R\)). Instead of utilizing a bottle of cleaning detergent to fill up free weight, two dry mixes are utilized instead.</p><p><strong>In summary</strong>: optimal bin packing reduces the cost to serve by up to 20% with savings in carrier costs of up to 55%. No particular pressure of the dangerous goods penalty on the bin packing was observed. The optimal solution coincides with the simple heuristic of placing all cleaning detergent bottles into a single package. Efficiency losses arise primarily when an additional parcel must be added to fulfill the subscription, thereby reducing the value per parcel. These losses are partially mitigated by downsizing to smaller and thus cheaper parcels but still translate into higher carrier costs. Despite this, The Oater realizes substantial savings through optimized shipping, directly improving margin. Moreover, on-premise oat drink is largely a low-margin FMCG, where decreasing the cost to serve at higher volumes is more effective than increasing the price per liter for the customer. The case study showed combined warehouse and carrier costs of about 20-10%, excluding returns and personnel. Looking at industry standards, <a href="https://transportgeography.org/contents/chapter7/logistics-freight-distribution/ecommerce-cost-structure/?utm_source=chatgpt.com">The Geography of Transport Systems</a> suggests that a theoretical minimum of 10% may be achievable, though this is rarely realized in practice. In most cases, combined shares for warehouse and carrier of up to 30% seem realistic, with The Oater operating at the lower end through optimized shipping costs.</p><h1 id="code"> <a href="#code" class="anchor-heading" aria-labelledby="code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Code</h1><p>Want to get started on your own? Try out differenct cost vectors and penalties? In depth analyse the data? Clone my repository <a href="https://github.com/auerbenji/shipping-cost-optimization">here</a>. I provided the optimization as well as the visualization script as well as the results in a concise csv file. Enjoy.</p></main><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2025 Benjamin Auer. Unless otherwise stated, this page expresses my work/view/opinion. Page hosted on GitHub, using Just the Docs by Patrick Marsceill under an <a href="https://github.com/just-the-docs/just-the-docs/tree/main/LICENSE.txt">MIT license.</a> <a href="https://www.netlify.com/">This site is powered by Netlify.</a></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/auerbenji/auerbenji.github.io" id="edit-this-page">Auerbenji on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
